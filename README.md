# Metro Pet (Metrogotchi)

A virtual pet application inspired by Tamagotchi, built with Svelte and Capacitor. Create, care for, and customize your own virtual pet with ASCII art animations, stat management, and a beautiful Metro UI design.

## Features

### ğŸ¾ Core Features
- **Virtual Pet Management** - Create and care for your own virtual pet
- **Stat System** - Track happiness, hunger, energy, and cleanliness
- **Dynamic Pet States** - Pets have moods (happy, sad, hungry, tired, sleepy, dirty) and statuses (present, away, sleeping)
- **Pet Actions** - Feed, play, clean, and put your pet to sleep
- **Age Tracking** - Your pet ages over time, displayed in minutes, hours, and days

### ğŸ¨ Customization
- **6 Preset Pets** - Choose from Metrocon, Tweety, Meowth, Pakkun, Bugs, or Kowalski
- **Custom Pet Creator** - Design your own pet with custom ASCII art animations
- **Animation System** - Define multiple animations per pet:
  - Normal/happy face
  - Idle animations (0 to n animations, each with 1 to n frames)
  - Hungry animation
  - Sleeping animation
  - Dirty animation
  - Sad animation
  - Away animations (depressed/gone out to play, hungry/gone hunting)
  - Fall asleep animation (tired)
  - Action animations (feed, clean, play)

### ğŸ¬ Animations
- **Multi-frame Animations** - Each animation can have 1 to n frames that cycle automatically
- **State-based Animations** - Animations change based on pet mood, status, and actions
- **Idle Animation System** - Multiple idle animations that cycle when the pet is in normal state
- **Real-time Preview** - Preview custom pet animations as you create them

### ğŸ“± UI/UX
- **Metro UI Design** - Clean, modern interface with dark theme
- **Flip Animations** - Smooth page transitions with flip-in/flip-out effects
- **Responsive Layout** - Works on mobile and desktop
- **Native Android Support** - Built with Capacitor for Android deployment

## Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js** (v18 or higher)
- **pnpm** (package manager) - or npm/yarn
- **Android Studio** (for Android development, optional)
- **Java Development Kit (JDK)** (version 17 or higher, for Android)
- **Android SDK** (API level 33 or higher, for Android)

## Installation

### 1. Install Dependencies

```bash
pnpm install
```

### 2. Development

Run the development server:

```bash
pnpm run dev
```

The app will be available at `http://localhost:7773` (or the next available port).

### 3. Build for Production

```bash
pnpm run build
```

## Project Structure

```
metro-pet/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ActionsPanel.svelte      # Action buttons (feed, play, clean, sleep, configure)
â”‚   â”‚   â”œâ”€â”€ AnimatedPetDisplay.svelte # Pet animation renderer with frame cycling
â”‚   â”‚   â”œâ”€â”€ Button.svelte            # Button component
â”‚   â”‚   â”œâ”€â”€ CustomPetEditor.svelte   # Custom pet animation editor
â”‚   â”‚   â”œâ”€â”€ Input.svelte             # Input field component
â”‚   â”‚   â”œâ”€â”€ PetDisplay.svelte        # Pet display wrapper component
â”‚   â”‚   â”œâ”€â”€ StatBar.svelte           # Individual stat bar component
â”‚   â”‚   â””â”€â”€ StatsDisplay.svelte      # Stats display container
â”‚   â”œâ”€â”€ pages/                  # Page components
â”‚   â”‚   â”œâ”€â”€ CustomPetPage.svelte     # Custom pet creation/editing page
â”‚   â”‚   â”œâ”€â”€ PetPage.svelte           # Main pet viewing/interaction page
â”‚   â”‚   â”œâ”€â”€ SetupPage.svelte         # Pet setup/configuration page
â”‚   â”‚   â””â”€â”€ StatusBar.svelte         # Custom status bar (if used)
â”‚   â”œâ”€â”€ utils/                  # Utility functions
â”‚   â”‚   â””â”€â”€ petAnimations.js         # Animation system and preset definitions
â”‚   â”œâ”€â”€ App.svelte              # Main app component with routing
â”‚   â”œâ”€â”€ main.js                 # Application entry point
â”‚   â””â”€â”€ app.css                 # Global styles
â”œâ”€â”€ public/                     # Static assets
â”‚   â”œâ”€â”€ logo.png
â”‚   â”œâ”€â”€ metrocon.jpg            # Pet type images
â”‚   â”œâ”€â”€ tweety.webp
â”‚   â”œâ”€â”€ meowth.avif
â”‚   â”œâ”€â”€ pakkun.webp
â”‚   â”œâ”€â”€ bugs.jpg
â”‚   â””â”€â”€ kowalski.webp
â”œâ”€â”€ android/                    # Android project (generated by Capacitor)
â”œâ”€â”€ assets/                     # App icons and splash screens
â”œâ”€â”€ capacitor.config.ts         # Capacitor configuration
â”œâ”€â”€ vite.config.js              # Vite build configuration
â”œâ”€â”€ tailwind.config.js          # Tailwind CSS configuration
â””â”€â”€ package.json                # Dependencies and scripts
```

## How It Works

### Pet State Management

Pets have four main stats that change over time:
- **Happiness** (0-100): Decreases slowly over time, increases with interactions
- **Hunger** (0-100): Increases over time, decreases when fed
- **Energy** (0-100): Decreases when playing, increases when sleeping
- **Cleanliness** (0-100): Decreases slowly, increases when cleaned

### Pet Behaviors

Pets automatically:
- **Leave when too happy** - If happiness reaches 100 and the pet is unattended for 30 seconds, it leaves to look for company (returns after 2 minutes)
- **Leave when too hungry** - If hunger reaches 100, the pet leaves to hunt for food (returns after 2 minutes)
- **Sleep when tired** - If energy reaches 0, the pet falls asleep (sleeps for 2 minutes)
- **Wet the floor** - If cleanliness reaches 100, the pet wets the floor and cleanliness resets to 0

### Animation System

The animation system uses a hierarchical structure:

1. **Action Animations** (highest priority) - Play when user interacts (feed, clean, play)
2. **Event Animations** - Play for special events (pee, etc.)
3. **Status Animations** - Play based on pet status (sleeping, away)
4. **Mood Animations** - Play based on pet mood (hungry, dirty, sad, sleeping)
5. **Normal/Idle Animations** (default) - Play when pet is in normal state

Animations are stored as arrays of frames (strings). Multi-frame animations cycle automatically at 500ms per frame.

### Data Storage

All pet data is stored in `localStorage`:
- `pet_name` - Pet's name
- `pet_type` - Pet type (preset ID or "custom")
- `pet_created_at` - Timestamp when pet was created
- `pet_stats` - Current stats, mood, status, and last saved timestamp
- `pet_events` - Event history (last 50 events)
- `custom_pet_data` - Custom pet animation data (only for custom pets)
- `last_seen_event_time` - Last event timestamp the user has seen

## Android Development

### Setup

1. Build the web app:
```bash
pnpm run build
```

2. Sync with Android:
```bash
pnpm run android:sync
```

3. Open in Android Studio:
```bash
pnpm run android:open
```

Or use the combined command:
```bash
pnpm run android:run
```

### Build APK

```bash
pnpm run android:apk
```

The APK will be generated at `android/app/build/outputs/apk/debug/app-debug.apk`.

## Custom Pet Creation

To create a custom pet:

1. Click the "Custom Pet" button on the Setup page
2. Define animations for different states:
   - **Normal Face** (required): The default happy face
   - **Idle Animations**: Optional animations that cycle when pet is idle (can have 0 to n animations, each with 1 to n frames)
   - **Hungry**: Animation when pet is hungry
   - **Sleeping**: Animation when pet is sleeping
   - **Dirty**: Animation when pet is dirty
   - **Sad**: Animation when pet is sad
   - **Away**: Animation when pet is away (depressed/gone out to play)
   - **Away Hungry**: Animation when pet is away and hungry (gone hunting)
   - **Fall Asleep**: Animation when pet falls asleep from being tired
   - **Feed/Clean/Play**: Action animations for interactions

3. Each animation can have multiple frames (1 to n). Frames cycle at 500ms intervals.
4. Preview updates in real-time as you type
5. Save your custom pet and return to setup

## Preset Pets

The app comes with 6 preset pets:
- **Metrocon** - Classic smiley face
- **Tweety** - Happy bird
- **Meowth** - Cat-like character
- **Pakkun** - Playful character
- **Bugs** - Bug character
- **Kowalski** - Penguin character

Each preset has predefined animations for all states.

## Technologies Used

- **Svelte 4** - Reactive UI framework
- **Capacitor 5** - Cross-platform native runtime
- **Vite** - Build tool and dev server
- **Tailwind CSS** - Utility-first CSS framework
- **Iconify** - Icon library
- **TypeScript** - Type safety (configuration)

## Scripts

- `pnpm run dev` - Start development server
- `pnpm run build` - Build for production
- `pnpm run preview` - Preview production build
- `pnpm run android:sync` - Sync web assets with Android project
- `pnpm run android:open` - Open Android project in Android Studio
- `pnpm run android:run` - Build, sync, and open Android project
- `pnpm run android:build` - Build and sync with Android
- `pnpm run android:apk` - Build and generate APK

## Configuration

### Capacitor Config

Main configuration is in `capacitor.config.ts`:
- **appId**: `com.metropet.app`
- **appName**: `Metro Pet`
- **webDir**: `dist`

### Animation Configuration

Animation definitions are in `src/utils/petAnimations.js`:
- Preset pet animations are defined in `presetPetAnimations` object
- Custom pet animations are stored in `localStorage` as `custom_pet_data`
- Animation selection logic is in `getCurrentAnimation()` function

## License

See LICENSE file for details.
